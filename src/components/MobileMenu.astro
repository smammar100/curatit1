---
import Button from './ui/Button.astro';
import type { ImageCollection } from '@/lib/types';
import { CONTACT_LINKS } from '@/lib/utils';

export interface Props {
  collections: ImageCollection[];
}

const { collections } = Astro.props;

const navItems = [
  { label: "home", href: "/" },
  { label: "featured", href: "/gallery/featured" },
  { label: "gallery", href: "/gallery" },
];
---

<Button variant="secondary" size="sm" class="md:hidden uppercase" id="mobile-menu-trigger">
  Menu
</Button>

<!-- Mobile Menu Overlay (hidden by default) -->
<div id="mobile-menu" class="fixed inset-0 bg-foreground/30 z-50 hidden">
  <div class="fixed top-0 bottom-0 left-0 flex w-full md:w-[400px] p-3 md:p-4 lg:p-6">
    <div class="flex flex-col bg-muted p-3 md:p-4 rounded w-full">
      <div class="pl-2 flex items-baseline justify-between mb-10">
        <p class="text-2xl font-semibold">Menu</p>
        <Button size="sm" variant="ghost" id="mobile-menu-close">
          Close
        </Button>
      </div>

      <nav class="grid grid-cols-2 gap-x-6 gap-y-4 mb-10">
        {navItems.map((item) => (
          <Button
            size="sm"
            variant="secondary"
            class="uppercase bg-background/50 justify-start"
            href={item.href}
          >
            {item.label}
          </Button>
        ))}
      </nav>

      <div class="mb-6">
        <h4 class="font-extrabold text-lg md:text-xl mb-4">Categories</h4>
        <ul class="flex flex-col gap-1.5 leading-5">
          {collections.map((collection) => (
            <li>
              <a href={`/gallery/${collection.handle}`} class="hover:underline">
                {collection.title}
              </a>
            </li>
          ))}
        </ul>
      </div>

      <div class="mt-auto mb-6">
        <p class="italic tracking-tighter text-base">
          Curated. Beautiful. Inspiring.
        </p>
        <div class="mt-5 text-base leading-tight">
          <p>Photography that speaks to the soul.</p>
          <p>Captured moments, shared stories.</p>
          <p>Beauty in every frame.</p>
        </div>
      </div>
      
      <ul class="flex flex-row gap-2 justify-between">
        {CONTACT_LINKS.map((link) => (
          <li>
            <a
              href={link.href}
              target="_blank"
              class="text-xs 2xl:text-sm leading-tight transition-colors hover:underline ease-out duration-200 whitespace-nowrap text-muted-foreground hover:text-foreground"
            >
              {link.label}
            </a>
          </li>
        ))}
      </ul>
    </div>
  </div>
</div>

<script>
  const trigger = document.getElementById('mobile-menu-trigger');
  const menu = document.getElementById('mobile-menu');
  const close = document.getElementById('mobile-menu-close');

  trigger?.addEventListener('click', () => {
    menu?.classList.remove('hidden');
  });

  close?.addEventListener('click', () => {
    menu?.classList.add('hidden');
  });

  menu?.addEventListener('click', (e) => {
    if (e.target === menu) {
      menu.classList.add('hidden');
    }
  });
</script>